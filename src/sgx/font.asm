// Punctuation
FONT_EXCLAIMATION equ     0;

// Numbers
FONT_0            equ     15;
FONT_1            equ     16;
FONT_2            equ     17;
FONT_3            equ     18;
FONT_4            equ     19;
FONT_5            equ     20;
FONT_6            equ     21;
FONT_7            equ     22;
FONT_8            equ     23;
FONT_9            equ     24;

// Upper case
FONT_UC_A            equ     32;
FONT_UC_B            equ     33;
FONT_UC_C            equ     34;
FONT_UC_D            equ     35;
FONT_UC_E            equ     36;
FONT_UC_F            equ     37;
FONT_UC_G            equ     38;
FONT_UC_H            equ     39;
FONT_UC_I            equ     40;
FONT_UC_J            equ     41;
FONT_UC_K            equ     42;
FONT_UC_L            equ     43;
FONT_UC_M            equ     44;
FONT_UC_N            equ     45;
FONT_UC_O            equ     46;
FONT_UC_P            equ     47;
FONT_UC_Q            equ     48;
FONT_UC_R            equ     49;
FONT_UC_S            equ     50;
FONT_UC_T            equ     51;
FONT_UC_U            equ     52;
FONT_UC_V            equ     53;
FONT_UC_W            equ     54;
FONT_UC_X            equ     55;
FONT_UC_Y            equ     56;
FONT_UC_Z            equ     57;

// Lower case
FONT_LC_A            equ     65;
FONT_LC_B            equ     66;
FONT_LC_C            equ     67;
FONT_LC_D            equ     68;
FONT_LC_E            equ     69;
FONT_LC_F            equ     70;
FONT_LC_G            equ     71;
FONT_LC_H            equ     72;
FONT_LC_I            equ     73;
FONT_LC_J            equ     74;
FONT_LC_K            equ     75;
FONT_LC_L            equ     76;
FONT_LC_M            equ     77;
FONT_LC_N            equ     78;
FONT_LC_O            equ     79;
FONT_LC_P            equ     80;
FONT_LC_Q            equ     81;
FONT_LC_R            equ     82;
FONT_LC_S            equ     83;
FONT_LC_T            equ     84;
FONT_LC_U            equ     85;
FONT_LC_V            equ     86;
FONT_LC_W            equ     87;
FONT_LC_X            equ     88;
FONT_LC_Y            equ     89;
FONT_LC_Z            equ     90;

sgx_const_font:     dw;


sgx_graphics_DrawSurface_setCurrentFont:
        st.w    (sgx_const_font), r3;
        ret;


// IN:
// r2 = Screen address
// r3 = String ptr
sgx_graphics_Font_draw:
        ld.b    r1, (r3++);

sgx_graphics_Font_draw_loop:
        push    r1;
        push    r2;
        push    r3;

        ld.b    r0, (r3);
        jsr     sgx_graphics_Font_drawCharacter;

        pop     r3;
        addq    r3, #1;     // next string position

        pop     r2;
        addq    r2, #1;     // next screen ptr

        pop     r1;
        addq    r1, #-1;     // string length counter
        bne     sgx_graphics_Font_draw_loop;

        ret;


// IN:
// r0 = Character index
// r2 = Screen address
sgx_graphics_Font_drawCharacter:
        // all chars are 8x8. i.e. 1 byte wide x 8 rows
        // the image is 16 characters wide
        ld.w    r3, (sgx_const_font);

        // For characters on the 1st line, we +1 bytes for each character. i.e. += idx%15
        push    r0;
        ld.w    r1,#15;
        and     r0,r1;
        add     r3, r0;
        pop     r0;

        // For characters on the Nth line, we +16 for each row (i.e. shift 4 left)
        // N = 8*16 * int(n/16)
        // Which we simplify by masking off the 4 LSB
        ld.w    r1, #0xfff0;
        and     r0, r1;
        lsl     r0, #3; // mul 8
        add r3, r0;

        // Now we're ready to draw
        ld.w    r1,#8;
sgx_graphics_Font_drawCharacter_loop:
        ld.b    r0, (r3++);
        st.b    (r2), r0;

        ld.w    r0,#15;         // skip 15 bytes of font data
        add     r3, r0;

        addq    r2,#2;            // next display row
        addq    r2,#2;            // next display row

        addq    r1,#-1;
        bne     sgx_graphics_Font_drawCharacter_loop;
        ret;



SGX_FONT_STANDARD_INVERSE	equ $;
    db 239,235,255,239,249,199,239,239,247,171,255,255,255,255,191,231,239,235,235,167,208,195,239,231,231,171,239,255,255,255,159,195,239,235,235,131,214,251,239,243,207,199,239,255,255,255,207,153,239,255,193,235,233,123,255,251,223,131,239,255,255,255,239,189,239,255,235,199,151,103,255,251,223,199,131,255,195,255,247,189,255,255,193,175,107,155,255,247,239,171,239,255,255,255,251,219,239,255,235,195,159,103,255,239,247,255,239;
    db 239,255,239,253,231,255,255,255,239,255,255,255,255,255,255,255,247,255,255,255,255,239,195,195,239,129,195,129,195,195,255,255,255,255,255,227,195,231,189,189,231,253,253,223,189,189,255,255,159,255,249,221,221,239,223,223,235,193,193,239,195,189,239,239,231,129,231,223,198,239,231,231,237,191,189,247,189,131,255,255,249,255,159,231,214,239,251,189,193,189,189,251,189,191,255,255,231,129,231,255,197,199,129,195,239,195,195,253,195,195,239,239,159,255,249,247,251,255,255;
    db 255,255,255,255,255,255,255,255,247,255,255,255,255,199,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,231,225,227,225,193,193,227,189,131,199,221,253,125,189,199,225,231,221,221,221,253,253,221,189,239,223,237,253,57,185,187,221,219,225,254,221,225,225,254,129,239,223,245,253,85,181,187,225,195,221,254,221,253,253,198,189,239,223,241,253,109,173,187,253,189,221,221,221,253,253,221,189,239,221,237,253,125,157,187,253,189,225,227,225,193,253,227,189,131,227,221,129,125,189,199,253,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,199,225,199,1,189,126;
    db 125,189,125,129,227,253,227,247,255,255,187,221,187,239,189,189,125,219,187,223,251,251,239,235,255,255,187,225,247,239,189,189,109,231,215,239,251,247,239,255,255,255,187,245,207,239,189,219,85,231,239,247,251,239,239,255,255,255,187,237,187,239,189,219,57,219,239,251,251,223,239,255,255,255,199,221,199,239,195,231,125,189,239,129;
    db 227,191,227,255,129,255,191,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,247,255,253,255,191,255,255,255,251,239,239,251,247,255,255,255,239,195,253,255,191,195,231,255,251,255,255,251,247,255,255,255,255,191;
    db 193,199,131,189,247,211,227,239,231,219,247,153,139,195,255,131,189,251,189,129,227,205,219,239,239,235,247,165,179,189,255,157,185,251,157,253,247,221,219,239,239,243,247,189,187,189,255,163,197,199,163,195,247,211,219,239,239,203,231,189,187;
    db 195,255,255,255,255,255,255,255,223,255,255,239,255,255,255,255,255,255,255,255,255,255,255,255,227,255,255,241,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,199,239,227,255,129,255,255,255,199,247,255,255,255,255,255,255,247,239,239,255,129,197,163,203,251,195,187,189;
    db 126,189,189,195,243,239,207,255,129,185,157,179,231,247,187,189,126,219,187,239,243,239,207,179,129,189,189,251,223,247,155,219,165,231,215,247,247,239,239,205,129,193,131,251,227,231,167,231,153,153,239,195,199,239,227,255,129,253,191,255,255,255,255,255,255,255,247,255,255,239,255,255,255,253,191,255,255,255,255,255,255,255,249,255,255,255,255,255,255;


SGX_FONT_STANDARD   equ $; 
    db 16,20,20,88,47,60,16,24,24,84,16,0,0,0,96,60,16,20,20,124,41,4,16,12,48,56,16,0,0,0,48,102,16,0,62,20,22,132,0,4,32,124,16,0,0,0,16,66,16,0,20,56,104,152,0,4,32,56,124,0,60,0,8,66,0,0,62,80,148,100,0,8,16,84,16,0,0,0;
    db 4,36,16,0,20,60,96,152,0,16,8,0,16,16,0,16,2,24,0,0,0,16,0,0,0,0,0,0,0,8,0,0,0,0,16,60,60,16,126,60,126,60,60,0,0,0,0,0,28,60,24,66,66,24,2,2,32,66,66,0,0,96,0,6,34,34,16,32,32,20,62,62,16,60,66,16,16,24,126,24,32,57;
    db 16,24,24,18,64,66,8,66,124,0,0,6,0,96,24,41,16,4,66,62,66,66,4,66,64,0,0,24,126,24,0,58,56,126,60,16,60,60,2,60,60,16,16,96,0,6,8,4,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24;
    db 30,28,30,62,62,28,66,124,56,34,2,130,66,56,30,24,34,34,34,2,2,34,66,16,32,18,2,198,70,68,34,36,30,1,34;
    db 30,30,1,126,16,32,10,2,170,74,68,30,60,34,1,34,2,2,57,66,16,32,14,2,146,82,68,2,66,34,34,34,2,2,34,66,16,34,18,2,130,98,68,2,66,30,28,30,62,2,28,66,124,28,34,126,130,66,56,2,0,0,0,0,0,0,0,0,0,0,0,0,0;
    db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,30,56,254,66,129,130,66,130,126,28,2,28,8,0,0,68,34,68,16,66,66,130,36,68,32,4,4,16,20,0,0,68,30,8,16,66,66,146,24,40,16,4,8,16,0,0,0,68,10,48,16,66,36,170,24,16,8,4,16,16,0,0,0,68,18,68,16,66,36,198,36;
    db 16,4,4,32,16,0,0,0,56,34,56,16,60,24,130,66,16,126,28,64,28,0,126,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,2,0,64,0,0,0,4,16,16,4,8,0,0,0,16,60,2,0,64,60,24,0,4,0,0,4,8,0,0,0,0,64,62,56,124,66,8,44,28,16;
    db 24,36,8,102,116,60,0,124,66,4,66,126,28,50,36,16,16,20,8,90,76,66,0,98,70,4,98,2,8,34,36,16,16,12,8,66,68;
    db 66,0,92,58,56,92,60,8,44,36,16,16,52,24,66,68,60,0,0,0,0,0,0,0,32,0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,28,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,16,28,0,126,0,0,0,56,8,0,0,0,0,0,0,8,16,16,0,126,58,92,52,4,60,68,66,129;
    db 66,66,60,12,16,48,0,126,70,98,76,24,8,68,66,129,36,68,16,12,16,48,76,126,66,66,4,32,8,100,36,90,24,40,8,8,16,16,50,126,62,124;
    db 4,28,24,88,24,102,102,16,60,56,16,28,0,126,2,64,0,0,0,0,0,0,0,8,0,0,16,0,0,0,2,64,0,0,0,0,0,0,0,6,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255;
